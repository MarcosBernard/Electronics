<!DOCTYPE html>
<!-- saved from url=(0039)https://os.mbed.com/components/HC-SR04/ -->
<html class="no-js" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <title>HC-SR04 | Mbed</title>
    

    
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="user-scalable=yes,width=device-width,initial-scale=0.9">

    

<!-- Google Analytics -->
<script async="" src="./HC-SR04 _ Mbed_files/gtm.js.descarga"></script><script async="" src="./HC-SR04 _ Mbed_files/analytics.js.descarga"></script><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script><script async="" src="./HC-SR04 _ Mbed_files/hotjar-971746.js.descarga"></script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="https://os.mbed.com/static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://os.mbed.com/static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://os.mbed.com/static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://os.mbed.com/static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://os.mbed.com/static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://os.mbed.com/static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://os.mbed.com/static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://os.mbed.com/static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://os.mbed.com/static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://os.mbed.com/static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://os.mbed.com/static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://os.mbed.com/static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://os.mbed.com/static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="./HC-SR04 _ Mbed_files/css">

<link rel="stylesheet" href="./HC-SR04 _ Mbed_files/output.811e2930ab34.css" type="text/css">


    
    

    <link rel="stylesheet" type="text/css" href="./HC-SR04 _ Mbed_files/legacy-main.beb4537fc2ac.css">
    <script type="text/javascript" src="./HC-SR04 _ Mbed_files/legacy-bundle.d4c318d04056.js.descarga"></script>

    <script src="./HC-SR04 _ Mbed_files/output.57729a8e1a3b.js.descarga"></script>
    <script type="text/javascript">
        var MTIProjectId='531df303-da6d-4e1e-934d-ec3ecdc164a9';
        (function() {
            var mtiTracking = document.createElement('script');
            mtiTracking.type='text/javascript';
            mtiTracking.async='true';
            mtiTracking.src="/static/js/mtiFontTrackingCode.js";
            (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild( mtiTracking );
        })();
    </script><script type="text/javascript" async="" src="./HC-SR04 _ Mbed_files/mtiFontTrackingCode.js.descarga"></script>

    
    
    
<link type="text/css" rel="stylesheet" href="./HC-SR04 _ Mbed_files/1.css"></head>

<body>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M6FZ495&gtm_auth=3a8Vwkp5SsDiYq6tYR1ObQ&gtm_preview=env-6&gtm_cookies_win=x"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>

                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Ecosystem</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/partners/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#our_partners"></use></svg>
                                            <div>
                                                <p>Our partners</p>
                                                <p>Dozens of leading companies trust Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview &amp; Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                                <li>
                                    <a href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                      Keil Studio
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>

            <div class="mbed-nav__cta">
                <a class="mbed-nav__cta-button" href="https://studio.keil.arm.com/" target="_blank">
                  Keil Studio Cloud
                </a>
                <div class="mbed-nav__cta-dropdown-container">
                    <div class="mbed-nav__cta-notification" style="display: block;"></div>
                    <span class="mbed-nav__cta-dropdown"><i class="far fa-chevron-down fa-xs"></i></span>
                    <div class="mbed-nav__cta-dropdown-content-container">
                        <div class="mbed-nav__cta-dropdown-content">
                            <ul class="mbed-nav__cta-dropdown-items">
                                <li>
                                    <a class="mbed-nav__cta-dropdown-item" href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo">
                                        <header class="mbed-nav__dropdown-item-header">
                                            <h5>Keil Studio Cloud</h5>
                                            <div class="mbed-nav__badge"><i class="fas fa-sparkles"></i>New</div>
                                        </header>
                                        <p>A modern, browser-based IDE for IoT, ML and embedded development with Mbed and CMSIS.</p>
                                    </a>
                                </li>
                                <li>
                                    <a class="mbed-nav__cta-dropdown-item" href="https://os.mbed.com/ide/">
                                        <header class="mbed-nav__dropdown-item-header">
                                            <h5>Online Compiler</h5>
                                            <div class="mbed-nav__badge mbed-nav__badge--deprecated">Retiring</div>
                                        </header>
                                        <p>Classic Compiler for Mbed projects.</p>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/components/HC-SR04/">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/components/HC-SR04/">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Ecosystem</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/partners/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#our_partners"></use></svg>
                                            <p>Our partners</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview &amp; Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



    <div id="main-content">
        

        

        

        
            

        

        
        <div>
            <div class="row" id="top">
                <div class="six columns">
                    <div class="breadcrumbs">
                        
    <a href="https://os.mbed.com/components/">Components</a> » HC-SR04

                    </div>
                </div>
                <div class="six columns header search-block">
                    
    
    <form action="https://os.mbed.com/components/" method="GET" class="search-box">
    <input type="text" name="q" placeholder="Search components on os.mbed.com..." class="search-input" value="">
    <div class="search-box-button">
        <button type="submit" class="button">Search</button>
    </div>
</form>


                </div>
            </div>
            
        </div>
        

        
<div class="row">
    <div class="nine columns main-content" id="mbed-content">
        

    

    
    



<h1>HC-SR04</h1>



<p>Cheap ultrasonic range finder</p>



<h2>Hello World</h2>
<div class="flashbox fprogram"><h4 class="ftitle"><a style="font-weight: bold; position: relative; float: right;" class="button small radius" target="compiler" href="https://os.mbed.com/ide/import-program//users/ejteb/code/Nucleo_UltrasonicHelloWorld/">Import program</a><a href="https://os.mbed.com/users/ejteb/code/Nucleo_UltrasonicHelloWorld/">Nucleo_UltrasonicHelloWorld</a></h4><p>A hello world program for the HC-SR04</p><p class="wiki-api-footer">Last commit <abbr class="timeago" title="04 Dic 2014">04 Dic 2014</abbr> by <span><span class="authortext"><a href="https://os.mbed.com/users/ejteb/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/default_profile.jpg.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/ejteb/"> EJ Teb</a></span></span></p></div>



<h2>Library</h2>
<div class="flashbox flibrary"><h4 class="ftitle"><a style="font-weight: bold; position: relative; float: right;" class="button small radius" target="compiler" href="https://os.mbed.com/ide/import-program//users/ejteb/code/HC_SR04_Ultrasonic_Library/;mode:lib">Import library</a><a href="https://os.mbed.com/users/ejteb/code/HC_SR04_Ultrasonic_Library/">HC_SR04_Ultrasonic_Library</a></h4><p>Works with interrupts</p><p class="wiki-api-footer">Last commit <abbr class="timeago" title="24 Nov 2014">24 Nov 2014</abbr> by <span><span class="authortext"><a href="https://os.mbed.com/users/ejteb/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/default_profile.jpg.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/ejteb/"> EJ Teb</a></span></span></p></div>





<h2>Datasheet</h2>
<a href="http://www.micropik.com/PDF/HCSR04.pdf">http://www.micropik.com/PDF/HCSR04.pdf</a>



<h2>Notes</h2>

<div>
    <p>The HC-SR04 is one of the lowest cost Sonar-based distance sensor options available (as low as $3 US). There seem to be several hardware versions and/or clones that work the same as far the functions of the two pins (trigger and echo). It operates off of 5V DC power at around 15 ma (not active is 2 ma). The detection range is 3-400 cm with around a 15 degree beam width. Like most Sonars, it more readily detects large hard objects that reflect sound, so it might not see something soft like a fluffy cat. It uses a short 40 kHz ultrasonic ping that humans can't hear and then listens for the ping signal to return after reflecting off an object. The time delay for the reflected signal to echo back is used to measure the distance using a simple scaling calculation based on the speed of sound in air.<br><br>
There are two tranducers, one to transmit and one to receive. Two transducers turn out to be cheaper, since a higher voltage is needed to transmit and switching modes using only one transducer takes a lot of analog circuitry.<br><br>
Small Sonar sensors are often used in robots to detect objects. Sometimes they are used along with an IR-based sensor to improve the likelihood of object detection. Some robots and other devices even add a mechanical bump or limit switch. To detect objects in different directions, some robots rotate sensors on a turret or use several sensors mounted facing out at different angles .</p>
<p> <img src="./HC-SR04 _ Mbed_files/hcsr04.jpg" alt="sonar" title="sonar" width="400"> <br>
<a href="https://www.sparkfun.com/products/13959" rel="nofollow">HCSR04 from Sparkfun</a><br></p>
<p> <img src="./HC-SR04 _ Mbed_files/hcsr04back.jpg" alt="sonarback" title="sonarback" width="400"> <br>
Electronics on the back of the Sparkfun HC-SR04 include an unmarked  microprocessor? and a quad op amp. Other versions from other sources can have totally different hardware. The only <a href="https://os.mbed.com/media/uploads/4180_1/hcsr04_schematic.svg">HC-SR04 schematic available</a> seems to have some different transmit parts and a different microcontroller.<br><br></p>
<h2>Operation</h2>
<p><img src="./HC-SR04 _ Mbed_files/hc-sr04td.png" alt="td" title="td" width="600"> <br><br>
As seen in the timing diagram above, only two signal pins are used. Trigger starts a measurement cycle and sends out a short ultrasonic pulse (eight cycles at 40Khz) and then listens for a reflected signal (echo). Several cycles at 40Khz are needed for the analog receiver circuit to detect the reflected signal. The width of the echo pulse output pin indicates distance. A hardware timer would typically be used to measure the echo pulse width. A simple divide operation can then scale the value to cm or inches, if needed.<br><br>
The device should not be triggered again until waiting for the longest possible echo return time delay (maximum detection distance times speed of sound in air). This prevents any echos from the previous ultrasonic pulse interfering with the next pulse measurement or the new outgoing pulse being heard as the echo from the previous pulse. Something a bit over 10 measurements per second is typical on most small sonar sensors. The <a href="https://cdn.sparkfun.com/datasheets/Sensors/Proximity/HCSR04.pdf" rel="nofollow">HC- SR04 data sheet</a> suggests a min cycle time of 60 ms. <br><br></p>
<h2>Hello World Demo</h2>
<h3>Wiring</h3>
<table><tbody><tr><th>mbed LPC1768</th><th>HC-SR04</th></tr>
<tr><td>Vu (5V)</td><td>Vcc</td></tr>
<tr><td>Gnd</td><td>Gnd</td></tr>
<tr><td>p6</td><td>trig</td></tr>
<tr><td>p7</td><td>echo</td></tr>
</tbody></table>
<p>With my sensor and breadboard setup, an optional decoupling capacitor (10-100uf) across the power pins at the sensor helped reduce noise a tiny bit on measurements. This may also be a function of the noise on the host PC's 5V USB power supply.<br></p>
<h3>Using the Timer</h3>
<p>The simple approach is to use the <a href="https://developer.mbed.org/handbook/Timer">mbed timer APIs</a> to measure the width of the echo pulse using software polling to detect edges on the echo pulse. When echo goes high, start the timer and when echo goes low, stop the timer and read it. Software delay times to sample echo and start and stop the timer will be estimated using the timer and included in the timing calculations to obtain the distance measurement. On the LPC1768, the software delays of 3us did not have a significant effect (&lt;1mm) on distance measurements.<br><br> </p>
<div class="flashbox fcode"><h4 class="ftitle"> </h4><pre class="mbed-code" offset="0"><table cellpadding="0" cellspacing="0" border="0" class="codify_table"><tbody><tr><td class="codify_numcol"><div class="codify_numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br></div></td><td class="codify_screen"><pre><span class="SH_BUILTIN">#include&nbsp;</span><span class="SH_STRING">"mbed.h"</span>
&nbsp;
DigitalOut&nbsp;trigger(p6);
DigitalOut&nbsp;myled(LED1);&nbsp;<span class="SH_COMMENT">//monitor&nbsp;trigger</span>
DigitalOut&nbsp;myled2(LED2);&nbsp;<span class="SH_COMMENT">//monitor&nbsp;echo</span>
DigitalIn&nbsp;&nbsp;echo(p7);
<span class="SH_RESERVED">int</span>&nbsp;distance&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
<span class="SH_RESERVED">int</span>&nbsp;correction&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
Timer&nbsp;sonar;
&nbsp;
<span class="SH_RESERVED">int</span>&nbsp;main()
{
&nbsp;&nbsp;&nbsp;&nbsp;sonar.reset();
<span class="SH_COMMENT">//&nbsp;measure&nbsp;actual&nbsp;software&nbsp;polling&nbsp;timer&nbsp;delays</span>
<span class="SH_COMMENT">//&nbsp;delay&nbsp;used&nbsp;later&nbsp;in&nbsp;time&nbsp;correction</span>
<span class="SH_COMMENT">//&nbsp;start&nbsp;timer</span>
&nbsp;&nbsp;&nbsp;&nbsp;sonar.start();
<span class="SH_COMMENT">//&nbsp;min&nbsp;software&nbsp;polling&nbsp;delay&nbsp;to&nbsp;read&nbsp;echo&nbsp;pin</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_RESERVED">while</span>&nbsp;(echo==<span class="SH_NUMBER">2</span>)&nbsp;{};
&nbsp;&nbsp;&nbsp;&nbsp;myled2&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
<span class="SH_COMMENT">//&nbsp;stop&nbsp;timer</span>
&nbsp;&nbsp;&nbsp;&nbsp;sonar.stop();
<span class="SH_COMMENT">//&nbsp;read&nbsp;timer</span>
&nbsp;&nbsp;&nbsp;&nbsp;correction&nbsp;=&nbsp;sonar.read_us();
&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_STDIO">printf</span>(<span class="SH_STRING">"Approximate&nbsp;software&nbsp;overhead&nbsp;timer&nbsp;delay&nbsp;is&nbsp;%d&nbsp;uS\n\r"</span>,correction);
&nbsp;
<span class="SH_COMMENT">//Loop&nbsp;to&nbsp;read&nbsp;Sonar&nbsp;distance&nbsp;values,&nbsp;scale,&nbsp;and&nbsp;print</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_RESERVED">while</span>(<span class="SH_NUMBER">1</span>)&nbsp;{
<span class="SH_COMMENT">//&nbsp;trigger&nbsp;sonar&nbsp;to&nbsp;send&nbsp;a&nbsp;ping</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger&nbsp;=&nbsp;<span class="SH_NUMBER">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myled&nbsp;=&nbsp;<span class="SH_NUMBER">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myled2&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sonar.reset();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait_us(<span class="SH_NUMBER">10.0</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myled&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
<span class="SH_COMMENT">//wait&nbsp;for&nbsp;echo&nbsp;high</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_RESERVED">while</span>&nbsp;(echo==<span class="SH_NUMBER">0</span>)&nbsp;{};
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myled2=echo;
<span class="SH_COMMENT">//echo&nbsp;high,&nbsp;so&nbsp;start&nbsp;timer</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sonar.start();
<span class="SH_COMMENT">//wait&nbsp;for&nbsp;echo&nbsp;low</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_RESERVED">while</span>&nbsp;(echo==<span class="SH_NUMBER">1</span>)&nbsp;{};
<span class="SH_COMMENT">//stop&nbsp;timer&nbsp;and&nbsp;read&nbsp;value</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sonar.stop();
<span class="SH_COMMENT">//subtract&nbsp;software&nbsp;overhead&nbsp;timer&nbsp;delay&nbsp;and&nbsp;scale&nbsp;to&nbsp;cm</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distance&nbsp;=&nbsp;(sonar.read_us()-correction)/<span class="SH_NUMBER">58.0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myled2&nbsp;=&nbsp;<span class="SH_NUMBER">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_STDIO">printf</span>(<span class="SH_STRING">"&nbsp;%d&nbsp;cm&nbsp;\n\r"</span>,distance);
<span class="SH_COMMENT">//wait&nbsp;so&nbsp;that&nbsp;any&nbsp;echo(s)&nbsp;return&nbsp;before&nbsp;sending&nbsp;another&nbsp;ping</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait(<span class="SH_NUMBER">0.2</span>);
&nbsp;&nbsp;&nbsp;&nbsp;}
}
&nbsp;
</pre></td></tr></tbody></table></pre></div><p><br>This code works, but it eats up a lot of processor time taking measurements. Interrupts using the echo signal edges frees up processor time and would also provide a bit more accurate timing measurements. Last, everything should be setup in a class with a simple include file. Keeping the distance calculations in integer (and not float) mode would also speed up the code a bit.</p>
<h3>Using the Timer and Interrrupts</h3>
<p>The mbed API <a href="https://developer.mbed.org/handbook/InterruptIn">InterruptIn</a> is often used in timer code. It can force a function to be called when an external I/O pin changes state from low-to-high (rise) and/or high-to-low (fall) using interrupts. This is a handy, efficient, and accurate way to start, stop and read timers using external signals.</p>
<p>Using interrupts to detect changes in the Sonar's echo pin along with the timer will free up processor time for other operations. There is an existing  <a href="https://developer.mbed.org/components/HC-SR04/">HC-SR04 library on the mbed component page</a> for this device that uses timer interrupts to control the sensor. It sets up timers to measure the echo pulse with interrupts and uses another timer (with the <a href="https://developer.mbed.org/handbook/Timeout">mbed timeout API</a>) to trigger continuous measurements automatically. A positive edge on echo interrupts and starts the timer, and a negative edge on echo interrupts and reads the timer. The main program is free to do other tasks and can periodically check the last sonar distance value and activate another function, if needed. Here is a demo version using the same pins (for the mbed LPC1768). Hopefully enough hardware timers are available on the mbed platform to use this approach in the application. Keep in mind the RTOS (if used) also needs one timer for time slice interrupts. There are other sonar sensors that do not require a timer, but they are a bit more expensive.</p>
<div class="flashbox fprogram"><h4 class="ftitle"><a style="font-weight: bold; position: relative; float: right;" class="button small radius" target="compiler" href="https://os.mbed.com/ide/import-program//users/4180_1/code/LPC1768_HCSR04_HelloWorld/">Import program</a><a href="https://os.mbed.com/users/4180_1/code/LPC1768_HCSR04_HelloWorld/">LPC1768_HCSR04_HelloWorld</a></h4><p>Sonar demo with timer interrupts</p><p class="wiki-api-footer">Last commit <abbr class="timeago" title="13 Sep 2016">13 Sep 2016</abbr> by <span><span class="authortext"><a href="https://os.mbed.com/users/4180_1/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/5481b2f34a74e427a2818014b8e103b0.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/4180_1/"> jim hamblen</a></span></span></p></div>
<div class="flashbox fcode"><h4 class="ftitle"> </h4><pre class="mbed-code" offset="0"><table cellpadding="0" cellspacing="0" border="0" class="codify_table"><tbody><tr><td class="codify_numcol"><div class="codify_numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br></div></td><td class="codify_screen"><pre><span class="SH_BUILTIN">#include&nbsp;</span><span class="SH_STRING">"mbed.h"</span>
<span class="SH_BUILTIN">#include&nbsp;</span><span class="SH_STRING">"ultrasonic.h"</span>
&nbsp;
&nbsp;<span class="SH_RESERVED">void</span>&nbsp;dist(<span class="SH_RESERVED">int</span>&nbsp;distance)
{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//put&nbsp;code&nbsp;here&nbsp;to&nbsp;execute&nbsp;when&nbsp;the&nbsp;distance&nbsp;has&nbsp;changed</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_STDIO">printf</span>(<span class="SH_STRING">"Distance&nbsp;%d&nbsp;mm\r\n"</span>,&nbsp;distance);
}
&nbsp;
ultrasonic&nbsp;mu(p6,&nbsp;p7,&nbsp;.<span class="SH_NUMBER">1</span>,&nbsp;<span class="SH_NUMBER">1</span>,&nbsp;&amp;dist);&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//Set&nbsp;the&nbsp;trigger&nbsp;pin&nbsp;to&nbsp;p6&nbsp;and&nbsp;the&nbsp;echo&nbsp;pin&nbsp;to&nbsp;p7</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//have&nbsp;updates&nbsp;every&nbsp;.1&nbsp;seconds&nbsp;and&nbsp;a&nbsp;timeout&nbsp;after&nbsp;1</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//second,&nbsp;and&nbsp;call&nbsp;dist&nbsp;when&nbsp;the&nbsp;distance&nbsp;changes</span>
&nbsp;
<span class="SH_RESERVED">int</span>&nbsp;main()
{
&nbsp;&nbsp;&nbsp;&nbsp;mu.startUpdates();<span class="SH_COMMENT">//start&nbsp;measuring&nbsp;the&nbsp;distance</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_RESERVED">while</span>(<span class="SH_NUMBER">1</span>)
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//Do&nbsp;something&nbsp;else&nbsp;here</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mu.checkDistance();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//call&nbsp;checkDistance()&nbsp;as&nbsp;much&nbsp;as&nbsp;possible,&nbsp;as&nbsp;this&nbsp;is&nbsp;where</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SH_COMMENT">//the&nbsp;class&nbsp;checks&nbsp;if&nbsp;dist&nbsp;needs&nbsp;to&nbsp;be&nbsp;called.</span>
&nbsp;&nbsp;&nbsp;&nbsp;}
}
&nbsp;
</pre></td></tr></tbody></table></pre></div><p><br>
This code puts the distance in mm (not cm). It divides by 6 (and not 5.8) to use faster integer operations. For most applications this would not matter, but a bit more accuracy on the absolute measurements in mm could be obtained by scaling the integer operation (and still avoiding slower float operations). So the line in the library file
<br></p>
<div class="flashbox fcode"><h4 class="ftitle"> </h4><pre class="mbed-code" offset="0"><table cellpadding="0" cellspacing="0" border="0" class="codify_table"><tbody><tr><td class="codify_numcol"><div class="codify_numbers">1<br></div></td><td class="codify_screen"><pre>_distance&nbsp;=&nbsp;(end&nbsp;-&nbsp;start)/<span class="SH_NUMBER">6</span>;
</pre></td></tr></tbody></table></pre></div><p><br>
could be replaced by something like</p>
<div class="flashbox fcode"><h4 class="ftitle"> </h4><pre class="mbed-code" offset="0"><table cellpadding="0" cellspacing="0" border="0" class="codify_table"><tbody><tr><td class="codify_numcol"><div class="codify_numbers">1<br>2<br></div></td><td class="codify_screen"><pre>_distance&nbsp;=&nbsp;(end-start);\\
_distance&nbsp;=&nbsp;(_distance)&lt;&lt;<span class="SH_NUMBER">2</span>+_distance)/<span class="SH_NUMBER">29</span>;&nbsp;<span class="SH_COMMENT">//&nbsp;(distance*5)/29&nbsp;is&nbsp;distance/5.8</span>
</pre></td></tr></tbody></table></pre></div>
</div>


    

    <hr style="margin-top: 1em;">
    
        





<div id="component-discussions">
    <div class="component-community panel">
        
            
                
    <p> You need to <a href="https://os.mbed.com/account/login/?next=/components/HC-SR04/">log in</a> to post a discussion </p>

            
            
                
            
        


        
            <h2><a name="questions"> </a><a href="https://os.mbed.com/components/HC-SR04/#questions">Questions</a></h2>
            
                
                    
                        <div class="question">
                            <a href="https://os.mbed.com/questions/84597/Im-using-a-different-sensor-how-can-I-mo/" style="color: inherit !important;">
                                <div class="stats">
                                    
                                    <div class="answers noanswers" title="This question has no answers.">
                                    
                                    0 answers
                                    </div>
                                </div>
                            </a>

                            

                            <a href="https://os.mbed.com/questions/84597/Im-using-a-different-sensor-how-can-I-mo/" class="title" title="I&#39;m using the sonar found in this link: https://www.robotshop.com/ca/en/weatherproof-ultrasonic-sensor-separate-probe.html
Does anyone know what t...">
                                I'm using a different sensor, how can I modify this code to make it work?
                            </a>

                            <span class="qdata">
                                <span class="authortext"><a href="https://os.mbed.com/users/bradstevanus1/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/default_profile.jpg.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/bradstevanus1/"> Brad Stevanus</a></span> <br>
                                <abbr title="Mié 13 Feb 2019 15:10">3&nbsp;años, 2&nbsp;meses ago</abbr>
                            </span>

                            <p class="tags">
                            
                                <i class="fas fa-tag" aria-hidden="true"></i>
                                
                                <a href="https://os.mbed.com/questions/tag/HC%20SR04">HC SR04</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/refactoring">refactoring</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/Ultrasonic%20sensor">Ultrasonic sensor</a>
                                
                            
                            </p>
                        </div>
                    
                
                    
                        <div class="question">
                            <a href="https://os.mbed.com/questions/81344/there-will-be-some-time-period-when-I-ca/" style="color: inherit !important;">
                                <div class="stats">
                                    
                                    <div class="answers noanswers" title="This question has no answers.">
                                    
                                    0 answers
                                    </div>
                                </div>
                            </a>

                            

                            <a href="https://os.mbed.com/questions/81344/there-will-be-some-time-period-when-I-ca/" class="title" title="there will be some time period when I can not use other sensor&#39;s input.In this time ,I can not use ,for example,  a  sound sensor&#39;s input a to begi...">
                                there will be some time period when I can not use other sensor's input.
                            </a>

                            <span class="qdata">
                                <span class="authortext"><a href="https://os.mbed.com/users/Devanzyx/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/default_profile.jpg.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/Devanzyx/"> Devan Zhao</a></span> <br>
                                <abbr title="Mar 29 May 2018 14:08">3&nbsp;años, 10&nbsp;meses ago</abbr>
                            </span>

                            <p class="tags">
                            
                                <i class="fas fa-tag" aria-hidden="true"></i>
                                
                                <a href="https://os.mbed.com/questions/tag/HC">HC</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/SR04">SR04</a>
                                
                            
                            </p>
                        </div>
                    
                
                    
                        <div class="question">
                            <a href="https://os.mbed.com/questions/77357/How-do-I-get-multiple-ultrasonic-sensors/" style="color: inherit !important;">
                                <div class="stats">
                                    
                                    <div class="answers noanswers" title="This question has no answers.">
                                    
                                    0 answers
                                    </div>
                                </div>
                            </a>

                            

                            <a href="https://os.mbed.com/questions/77357/How-do-I-get-multiple-ultrasonic-sensors/" class="title" title="How do I get multiple ultrasonic sensors working on one piece of code?

Could you do an example please.

Cheers,
">
                                How do I get multiple ultrasonic sensors working on one piece of code?
                            </a>

                            <span class="qdata">
                                <span class="authortext"><a href="https://os.mbed.com/users/jackwilkinson21/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/default_profile.jpg.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/jackwilkinson21/"> Jack Wilkinson</a></span> <br>
                                <abbr title="Sáb 11 Mar 2017 09:09">5&nbsp;años, 1&nbsp;mes ago</abbr>
                            </span>

                            <p class="tags">
                            
                                <i class="fas fa-tag" aria-hidden="true"></i>
                                
                                <a href="https://os.mbed.com/questions/tag/HC">HC</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/SR04">SR04</a>
                                
                            
                            </p>
                        </div>
                    
                
                    
                        <div class="question">
                            <a href="https://os.mbed.com/questions/75682/Link-to-more-background-information-on-t/" style="color: inherit !important;">
                                <div class="stats">
                                    
                                    <div class="answers solved" title="This question has been solved.">
                                    
                                    1 answer
                                    </div>
                                </div>
                            </a>

                            
                                <i class="fas fa-check" aria-hidden="true" title="This question has been solved"></i>
                            

                            <a href="https://os.mbed.com/questions/75682/Link-to-more-background-information-on-t/" class="title" title="See [[https://developer.mbed.org/users/4180_1/notebook/using-the-hc-sr04-sonar-sensor/]] for some additional background information on this sensor....">
                                Link to more background information on the HC SR04 Sonar Sensor
                            </a>

                            <span class="qdata">
                                <span class="authortext"><a href="https://os.mbed.com/users/4180_1/"><img alt="" class="icon" width="16px" height="16px" src="./HC-SR04 _ Mbed_files/5481b2f34a74e427a2818014b8e103b0.16x16_q85_crop-center.jpg"></a> <a href="https://os.mbed.com/users/4180_1/"> jim hamblen</a></span> <br>
                                <abbr title="Lun 24 Oct 2016 09:11">5&nbsp;años, 5&nbsp;meses ago</abbr>
                            </span>

                            <p class="tags">
                            
                                <i class="fas fa-tag" aria-hidden="true"></i>
                                
                                <a href="https://os.mbed.com/questions/tag/distance%20sensor">distance sensor</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/HC%20SR04">HC SR04</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/sonar">sonar</a>, 
                                
                                <a href="https://os.mbed.com/questions/tag/timer">timer</a>
                                
                            
                            </p>
                        </div>
                    
                

                

            
        
    </div>
</div>

    



    </div>

    <div class="three columns sidebar ">
        
    
    <img src="./HC-SR04 _ Mbed_files/F90JYNWH7UR7RCS.LARGE.jpg.200x200_q85.jpg" width="200" height="153">

    
      <div class="panel statspanel">
        <h5 class="subheader">Board Partner</h5>
        <a href="https://os.mbed.com/teams/Trusted-Contributor/">
        
              <img src="./HC-SR04 _ Mbed_files/default_image.jpg.250x250_q85.jpg" width="250" height="237">
        </a>
        <h3><a href="https://os.mbed.com/teams/Trusted-Contributor/">Trusted Contributor</a></h3>
        <p>Trusted contributors from the mbed community</p>
      </div>
    

    





    
    
    <div class="panel radius">
        <h5>
            <i class="fas icon_tick" aria-hidden="true"></i>
            Tested boards
        </h5>

        
            
<a class="platform-card" href="https://os.mbed.com/platforms/ST-Nucleo-L053R8/">
    
    <img class="platform-card-image" src="./HC-SR04 _ Mbed_files/Nucleo64_ulp_nologo_1024_C5uQOMS.jpg.70x70_q85.jpg" width="70" height="70">
    <div class="platform-card-right">
        
        <img src="./HC-SR04 _ Mbed_files/ST_logo_2020_blue_V_rgb.png.40x20_q85.png" width="26" height="20">
        NUCLEO-L053R8
    </div>
</a>

        
            
<a class="platform-card" href="https://os.mbed.com/platforms/mbed-LPC1768/">
    
    <img class="platform-card-image" src="./HC-SR04 _ Mbed_files/LPC1768.jpg.70x70_q85.jpg" width="70" height="70">
    <div class="platform-card-right">
        
        <img src="./HC-SR04 _ Mbed_files/NXP_logo_RGB_web.png.40x20_q85.jpg" width="40" height="15">
        mbed LPC1768
    </div>
</a>

        
    </div>
    
    

    </div>
</div>

    </div>

    <script type="text/javascript">
        $(document).ready(function() {
            mbed.initDismissableBanners($('[data-dismissable]'));
            mbed.initNavNotification();
        });
    </script>

    
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script>2022 Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule" style="display: none;">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="./HC-SR04 _ Mbed_files/cookie_law.js.descarga"></script>




<div id="access-warning-modal" class="reveal-modal">
    <h2>Access Warning</h2>
    <p>You do not have the correct permissions to perform this operation. Please, contact us at support@mbed.com to gain full access.</p>
    <a class="close-reveal-modal">×</a>
</div>





</body></html>